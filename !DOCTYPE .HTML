<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seasonal Bites | Founder: Supriyo Das</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600&display=swap');
        :root { --primary: #4e342e; --accent: #b8860b; --bg: #fffcf5; --whatsapp: #25D366; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Poppins', sans-serif; background: var(--bg); color: #333; }
        
        /* BRANDING & NAV */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 1rem 5%; background: var(--primary); color: white; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .logo-container { display: flex; align-items: center; gap: 10px; }
        .company-logo { height: 45px; width: 45px; object-fit: contain; border-radius: 8px; background: white; padding: 2px; border: 1px solid var(--accent); }
        .logo-text { font-family: 'Playfair Display'; font-size: 1.5rem; color: #ffecb3; }
        .founder-tag { font-size: 0.75rem; border: 1px solid var(--accent); padding: 5px 12px; border-radius: 50px; color: var(--accent); font-weight: 600; }

        #offer-bar { text-align: center; padding: 10px; font-weight: 600; color: white; font-size: 0.9rem; }
        
        /* HERO & SEARCH */
        #hero { background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1589113103503-4947a0fd20c7?auto=format&fit=crop&w=1200'); height: 30vh; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center; background-size: cover; border-bottom: 5px solid var(--accent); }
        #searchBar { width: 85%; max-width: 500px; padding: 12px 25px; border-radius: 50px; border: 2px solid var(--accent); margin-top: 15px; outline: none; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        /* PRODUCT GRID */
        .container { padding: 2rem 5%; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; max-width: 1200px; margin: 0 auto; }
        .card { background: white; border-radius: 20px; overflow: hidden; box-shadow: 0 10px 25px rgba(0,0,0,0.05); text-align: center; padding-bottom: 20px; border: 1px solid #eee; transition: 0.3s; }
        .card:hover { transform: translateY(-5px); }
        .card-img { height: 200px; background-size: cover; background-position: center; border-bottom: 3px solid var(--accent); }
        .p-name { font-family: 'Playfair Display'; margin: 15px 0 5px; font-size: 1.3rem; color: var(--primary); }
        
        /* CART BAR */
        .cart-bar { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 500px; background: var(--primary); color: white; padding: 15px 30px; border-radius: 50px; display: none; justify-content: space-between; align-items: center; z-index: 1001; box-shadow: 0 10px 30px rgba(0,0,0,0.4); border: 1px solid var(--accent); }
        .btn-order { background: var(--whatsapp); color: white; border: none; padding: 12px 25px; border-radius: 50px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-order:hover { background: #1eb954; }
        
        /* MODAL & PAYMENT */
        .overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:2999; backdrop-filter: blur(5px); }
        .modal { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:white; padding:25px; border-radius:25px; z-index:3000; width:95%; max-width:400px; border: 2px solid var(--accent); max-height: 90vh; overflow-y: auto; }
        .form-input { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 10px; font-family: inherit; }

        .pay-method { border: 1px solid #ddd; padding: 12px; border-radius: 10px; margin: 10px 0; cursor: pointer; display: flex; align-items: center; gap: 10px; font-weight: 600; }
        .pay-method.active { border: 2px solid var(--accent); background: #fffcf0; }
        
        #payment-details-box { display: none; text-align: center; background: #fdfdfd; padding: 15px; border-radius: 15px; border: 1px dashed var(--accent); margin: 10px 0; }
        #qrcode { display: inline-block; margin-top: 10px; background: white; padding: 8px; border-radius: 10px; }
        .bank-info-text { text-align: left; font-size: 0.85rem; line-height: 1.6; color: #555; margin-top: 10px; padding: 10px; background: #f0f0f0; border-radius: 10px; }

        footer { background: var(--primary); padding: 50px 20px; text-align: center; color: white; border-top: 5px solid var(--accent); margin-top: 50px; }
    </style>
</head>
<body>

    <nav>
        <div class="logo-container">
            <img id="shop-logo" src="" alt="Logo" class="company-logo" style="display:none;">
            <div class="logo-text">Seasonal Bites</div>
        </div>
        <div class="founder-tag">Founder: Supriyo Das</div>
    </nav>

    <div id="offer-bar"></div>

    <header id="hero">
        <h1 style="font-family: 'Playfair Display'; font-size: 2.5rem;">Pure Homemade Sweets</h1>
        <input type="text" id="searchBar" placeholder="ðŸ” Search your favorite..." onkeyup="renderStore()">
    </header>

    <div class="container" id="product-grid"></div>

    <div class="cart-bar" id="cartBar">
        <div style="font-size: 1.1rem;">Total: â‚¹<span id="cart-total">0</span></div>
        <button class="btn-order" onclick="openCheckout()">Order on WhatsApp</button>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="modal" id="checkoutModal">
        <h3 style="color: var(--primary); font-family: 'Playfair Display'; margin-bottom: 10px;">ðŸšš Delivery Details</h3>
        <input type="text" id="cust-name" class="form-input" placeholder="Your Name">
        <input type="number" id="cust-phone" class="form-input" placeholder="WhatsApp Number">
        <textarea id="cust-address" class="form-input" placeholder="Full Delivery Address" style="height: 70px;"></textarea>
        
        <h4 style="margin-top: 15px; font-size: 0.9rem; color: var(--primary);">Choose Payment:</h4>
        
        <div class="pay-method active" id="pay-online" onclick="selectPay('Online')">
            <input type="radio" name="pay" checked> ðŸ’³ Online Payment (UPI/Bank)
        </div>

        <div id="payment-details-box">
            <p style="font-size: 0.8rem; font-weight: 600;">Pay: â‚¹<span id="pay-amt">0</span></p>
            <div id="qrcode"></div>
            <div class="bank-info-text">
                <strong>Bank:</strong> Bank of India<br>
                <strong>Name:</strong> SUPRIYO DAS<br>
                <strong>A/C No:</strong> 419010210002480<br>
                <strong>IFSC:</strong> BKID0004190
            </div>
            <p style="font-size: 0.7rem; color: #b8860b; margin-top: 5px;">*Scan QR or use Bank Transfer. Send screenshot on WhatsApp.</p>
        </div>

        <div class="pay-method" id="pay-cod" onclick="selectPay('COD')">
            <input type="radio" name="pay"> ðŸ’µ Cash on Delivery
        </div>

        <button onclick="sendFinalOrder()" class="btn-order" style="width:100%; margin-top:15px; border-radius: 12px; font-size: 1.1rem;">Confirm & Send Order</button>
        <p onclick="closeCheckout()" style="text-align:center; color:gray; margin-top:15px; cursor:pointer; font-size: 0.85rem;">Cancel</p>
    </div>

    <footer>
        <h2 style="font-family: 'Playfair Display'; color: #ffecb3; margin-bottom: 10px;">Seasonal Bites</h2>
        <p style="color: var(--accent); font-weight: 600;">Founder: Supriyo Das</p>
        <p style="font-size: 0.8rem; color: #888; margin-top: 20px;">Â© 2025 | Seasonal Bites | All Rights Reserved</p>
    </footer>

    <script>
        // --- CONFIGURATION ---
        const MY_WHATSAPP = "918250000000"; // REPLACE with your actual WhatsApp number
        const MY_UPI_ID = "greenappssolutions@icici"; // REPLACE with your UPI ID if you have your own later
        
        let cart = [];
        let selectedPayment = "Online";

        function selectPay(method) {
            selectedPayment = method;
            document.getElementById('pay-online').classList.toggle('active', method === 'Online');
            document.getElementById('pay-cod').classList.toggle('active', method === 'COD');
            document.getElementById('payment-details-box').style.display = (method === 'Online') ? 'block' : 'none';
            if(method === 'Online') generateQR();
        }

        function generateQR() {
            const total = cart.reduce((s, it) => s + it.total, 0);
            document.getElementById('pay-amt').innerText = total;
            // UPI URL Format
            const upiUrl = `upi://pay?pa=${MY_UPI_ID}&pn=Supriyo%20Das&am=${total}&cu=INR`;
            
            const qrDiv = document.getElementById("qrcode");
            qrDiv.innerHTML = "";
            new QRCode(qrDiv, { text: upiUrl, width: 140, height: 140 });
        }

        function renderStore() {
            const q = document.getElementById('searchBar').value.toLowerCase();
            const grid = document.getElementById('product-grid');
            const products = JSON.parse(localStorage.getItem('sb_prods')) || [];
            const offer = JSON.parse(localStorage.getItem('sb_offer')) || { text: "Premium Homemade Sweets", bg: "#b8860b" };
            const savedLogo = localStorage.getItem('sb_logo');

            // Apply Logo from Admin
            if(savedLogo) {
                const logoImg = document.getElementById('shop-logo');
                logoImg.src = savedLogo;
                logoImg.style.display = 'block';
            }

            // Apply Offer Banner from Admin
            const obar = document.getElementById('offer-bar');
            obar.innerText = offer.text;
            obar.style.background = offer.bg;

            grid.innerHTML = '';
            products.filter(p => p.name.toLowerCase().includes(q)).forEach((p, i) => {
                grid.innerHTML += `
                    <div class="card">
                        <div class="card-img" style="background-image: url('${p.img}')"></div>
                        <h3 class="p-name">${p.name}</h3>
                        <select id="type-${i}" class="form-input" style="width:90%; margin-bottom:5px;" onchange="updatePriceUI(${i}, ${p.sPrice}, ${p.bPrice})">
                            <option value="s">1 Piece - â‚¹${p.sPrice}</option>
                            <option value="b">12 Pieces (Box) - â‚¹${p.bPrice}</option>
                        </select>
                        <div style="font-weight:bold; font-size:1.4rem; color:var(--accent); margin:10px 0;" id="p-${i}">â‚¹${p.sPrice}</div>
                        <button onclick="addToCart(${i})" class="btn-order" style="width:90%;">Add to Cart</button>
                    </div>`;
            });
        }

        function updatePriceUI(i, s, b) {
            const type = document.getElementById(`type-${i}`).value;
            document.getElementById(`p-${i}`).innerText = `â‚¹${type === 's' ? s : b}`;
        }

        function addToCart(i) {
            const products = JSON.parse(localStorage.getItem('sb_prods'));
            const type = document.getElementById(`type-${i}`).value;
            const price = type === 's' ? products[i].sPrice : products[i].bPrice;
            const label = type === 's' ? 'Pc' : 'Box';
            
            cart.push({ name: products[i].name, total: parseInt(price), qty: label });
            
            document.getElementById('cartBar').style.display = 'flex';
            document.getElementById('cart-total').innerText = cart.reduce((s, it) => s + it.total, 0);
            alert(products[i].name + " added!");
        }

        function openCheckout() { 
            document.getElementById('overlay').style.display = 'block'; 
            document.getElementById('checkoutModal').style.display = 'block'; 
            if(selectedPayment === 'Online') generateQR();
        }
        function closeCheckout() { document.getElementById('overlay').style.display = 'none'; document.getElementById('checkoutModal').style.display = 'none'; }

        function sendFinalOrder() {
            const n = document.getElementById('cust-name').value;
            const p = document.getElementById('cust-phone').value;
            const a = document.getElementById('cust-address').value;
            if(!n || !p || !a) return alert("Please fill all details!");

            // Save order history to Admin Panel
            let db = JSON.parse(localStorage.getItem('sb_cust')) || [];
            db.push({ date: new Date().toLocaleDateString(), name: n, phone: p, address: a });
            localStorage.setItem('sb_cust', JSON.stringify(db));

            // Generate WhatsApp Message
            let total = cart.reduce((s, it) => s + it.total, 0);
            let msg = `*NEW ORDER - Seasonal Bites*%0AðŸ‘¤ *Name:* ${n}%0AðŸ“ž *Phone:* ${p}%0AðŸ  *Address:* ${a}%0A%0A*Items:*%0A`;
            cart.forEach((it, idx) => { msg += `${idx+1}. ${it.name} (${it.qty}) - â‚¹${it.total}%0A`; });
            msg += `%0AðŸ’° *Grand Total: â‚¹${total}*%0AðŸ’³ *Payment Mode: ${selectedPayment}*`;
            
            if(selectedPayment === "Online") msg += `%0A%0A_Note: I have attached the payment screenshot below._`;

            window.open(`https://wa.me/${MY_WHATSAPP}?text=${msg}`);
            
            // Reset
            cart = []; 
            document.getElementById('cartBar').style.display = 'none'; 
            closeCheckout();
        }

        window.onload = renderStore;
    </script>
</body>
</html>